<ul class="form-tabs cf">
    <li class="has-versions" ng-repeat="possibleForm in possibleForms">
       <!-- TODO selected element -->
       <a href="" ng-click="selectForm( possibleForm.href )" class="sel">{{ possibleForm.text }}</a>
       <a href="xlink-" class="icon-arrow-down versions-drop"><span class="struct">Visa tidigare versioner</span></a>
    </li>
</ul>
<ol class="form-sections cf">
    <li class="section-item" ng-class="{sel: currentFormPage.title==page.title}" ng-repeat="page in form[0].pages"><a href="" ng-click="selectFormPage(page)">{{page.title}}</a></li>
</ol>

<form method="post" novalidate ng-submit="submitForm()">
  <div>{{ formMessage }}</div>
  <div ng-repeat="field in currentFormPage.fields" class="row cols-1 cf">
    <div class="form-row" data-ng-switch on="field.field.fieldValue._type">

        <div data-ng-switch-when="se.streamsource.streamflow.api.administration.form.TextFieldValue">
          <div class="text col full col-1">
            <ng-include class="m-c" src="'modules/views/form-label.html'"></ng-include>
            <input maxlength="{{ field.field.fieldValue.width }}" ng-required="field.field.mandatory" ng-pattern="field.field.fieldValue.regularExpression" type="text" ng-model="field.value" name="{{ field.field.field }}" id="{{ field.field.fieldId }}" sf-generic-auto-send>
            <span class="error-ng-invalid-required" style="display: none">Required!</span>
            <span class="error-ng-invalid-pattern" style="display: none">Invalid input format</span>
          </div>
        </div>

        <div data-ng-switch-when="se.streamsource.streamflow.api.administration.form.DateFieldValue">
          <div class="text col full col-1">
            <ng-include class="m-c" src="'modules/views/form-label.html'"></ng-include>
            <input maxlength="{{ field.field.fieldValue.width }}" ng-required="field.field.mandatory" type="date" ng-model="field.value" name="{{ field.field.field }}" id="{{ field.field.fieldId }}" sf-generic-auto-send data-field-type="{{ field.field.fieldValue._type }}">
            <span class="error-ng-invalid-required" style="display: none">Required!</span>
            <span class="error-ng-invalid-pattern" style="display: none">Invalid input format</span>
          </div>
        </div>

        <div data-ng-switch-when="se.streamsource.streamflow.api.administration.form.NumberFieldValue">
          <div class="text col full col-1">
            <ng-include class="m-c" src="'modules/views/form-label.html'"></ng-include>
            <input ng-required="field.field.mandatory" ng-pattern="field.field.fieldValue.regularExpression" type="text" ng-model="field.value" name="{{ field.field.fieldId }}" id="{{ field.field.field }}" sf-generic-auto-send>
            <span class="error-ng-invalid-required" style="display: none">Required!</span>
            <span class="error-ng-invalid-pattern" style="display: none">Invalid number format</span>
          </div>
        </div>

        <div data-ng-switch-when="se.streamsource.streamflow.api.administration.form.TextAreaFieldValue">
          <div class="text col full col-1">
              <ng-include class="m-c" src="'modules/views/form-label.html'"></ng-include>
              <textarea ng-model="field.value" name="{{ field.field.field }}" id="{{ field.field.fieldId }}" cols="{{ field.field.fieldValue.cols }}" rows="{{ field.field.fieldValue.rows }}" sf-generic-auto-send></textarea>
          </div>
        </div>

        <div data-ng-switch-when="se.streamsource.streamflow.api.administration.form.ComboBoxFieldValue">
          <div class="select col medium col-2">
              <ng-include class="m-c" src="'modules/views/form-label.html'"></ng-include>
              <select custom-select ng-model="field.value"
              name="{{ field.field.field }}" id="{{ field.field.fieldId }}"
                      ng-options="option.value as option.name for option in field.field.fieldValue.options" sf-generic-auto-send data-field-type="{{ field.field.fieldValue._type }}">
              </select>
          </div>
        </div>

        <div data-ng-switch-when="se.streamsource.streamflow.api.administration.form.ListBoxFieldValue">
          <div class="select col medium col-2">
              <ng-include class="m-c" src="'modules/views/form-label.html'"></ng-include>
              <select multiple ng-multiple="true" ng-model="field.value"
                      ng-options="option.value as option.name for option in field.field.fieldValue.options" sf-generic-auto-send name="{{ field.field.field }}" data-field-type="{{ field.field.fieldValue._type }}">
              </select>
          </div>
        </div>

        <div data-ng-switch-when="se.streamsource.streamflow.api.administration.form.OptionButtonsFieldValue">
          <div class="radio col medium col-2">
              <ng-include class="m-c" src="'modules/views/form-label.html'"></ng-include>
              <span ng-repeat="option in field.field.fieldValue.values">
                <input ng-model="field.value" type="radio" name="{{ field.field.fieldId }}" value="{{ option }}" >{{ option }}</input>
              </span>
          </div>
        </div>

        <div data-ng-switch-when="se.streamsource.streamflow.api.administration.form.OpenSelectionFieldValue">
          <div class="radio col medium col-2">
              <ng-include class="m-c" src="'modules/views/form-label.html'"></ng-include>
              <span ng-repeat="option in field.field.fieldValue.extendedValues">
                <input sf-radio-extended-auto-send="{{ option.value != option.display }}" ng-model="field.value" type="radio" name="{{ field.field.fieldId }}"
                id="{{ field.field.field }}" value="{{ option.value }}">{{ option.display }}</input>
              </span>
              <div ng-show="field.field.fieldValue.values.indexOf(field.value) == -1"><input ng-model="field.value" sf-radio-extended-text-field="{{ field.field.fieldValue.extendedValues }}" type="text" name="{{ field.field.field }}"></div>
          </div>
        </div>

        <div data-ng-switch-when="se.streamsource.streamflow.api.administration.form.CheckboxesFieldValue">
          <div class="radio col medium col-2">
              <ng-include class="m-c" src="'modules/views/form-label.html'"></ng-include>
              <span ng-repeat="option in field.field.fieldValue.checkings">
                <input type="checkbox" value="{{option.name}}" ng-model="option.checked" type="radio" name="{{ field.field.field }}" sf-generic-auto-send data-field-type="{{ field.field.fieldValue._type }}" data-backing-field="{{ field.field.fieldValue.checkings }}">{{ option.name }}</input>
              </span>
          </div>
        </div>

        <div data-ng-switch-when="se.streamsource.streamflow.api.administration.form.CommentFieldValue">
          <div class="col medium col-2" ng-bind-html-unsafe="field.field.note"></div>
        </div>

        <div data-ng-switch-default>
          <div class="text col full col-1">
              <b>{{ field.field.description }}</b><br />
              Not supported form type <i>{{ field.field.fieldValue._type }}</i>
          </div>
        </div>
    </div>

  </div>


  <div ng-show="isLastPage(currentFormPage)">
    <input type="submit" name="submit" value="Skicka"></input>
  </div>
  <!--
  <div class="row cols-1 cf">
      <div class="text col full col-1">
          <label for="field-2">Personnummer <em>ååååmmdd-xxxx</em></label>
          <input type="text" name="field-2" id="field-2">
      </div>
  </div>
  <div class="row cols-1 cf">
      <div class="text col full col-1">
          <label for="field-3">Namn <em>Vårdnadshavare</em></label>
          <input type="text" name="field-3" id="field-3">
      </div>
  </div>
  <div class="row cols-1 cf">
      <div class="text col full col-1">
          <label for="field-4">Gatuadress</label>
          <input type="text" name="field-4" id="field-4">
      </div>
  </div>
  <div class="row cols-2 cf">
      <div class="text col small col-1">
          <label for="field-5">Postnummer</label>
          <input type="text" name="field-5" id="field-5" />
      </div>
      <div class="text col large col-2">
          <label for="field-6">Postort</label>
          <input type="text" name="field-6" id="field-6" />
      </div>
  </div>
  <div class="row cols-1 cf">
      <div class="text col full col-1">
          <label for="field-7">Telefon</label>
          <input type="text" name="field-7" id="field-7">
      </div>
  </div>
  <div class="row cols-1 cf">
      <div class="text col full col-1">
          <label for="field-8">E-post</label>
          <input type="text" name="field-8" id="field-8">
      </div>
  </div>-->
</form>

<div ng-show="currentFormPage">
  <a href="" class="btn inline" ng-class="{inactive: isFirstPage()}" ng-click="!isFirstPage() && previousFormPage()">Tillbaka</a> <a href="" class="btn inline" ng-class="{inactive: isLastPage()}" ng-click="!isLastPage() && nextFormPage()">Nästa</a>
</div>
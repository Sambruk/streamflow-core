<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>${request.resourceRef.remainingPart}</title>
    <link rel="stylesheet" type="text/css" href="/streamflow/streamflow/v1/static/rest.css" />
</head>

<body>

<h1>
    #set($path=$request.resourceRef.baseRef.path)
    <a href="${path}/">Root</a>
    #foreach ($segment in $request.resourceRef.relativeRef.segments)
      #if($segment != ".")
        #set($path=$path+"/"+$segment)
        / <a href="${path}/">$segment</a>
      #end
    #end
</h1>

#if ($result.queries)
<div class="block">
<h2>Queries</h2>
<ul>
#foreach($query in $result.queries)
    #set($desc = $api.method($query))
    <li>
        <a href="$query">$query</a>
        #if($desc)
        <p>$desc</p>
        #end
    </li>
#end
</ul>
</div>
#end

#if($result.commands)
<div class="block">
<h2>Commands</h2>
<ul>
#foreach($command in $result.commands)
    #set($desc = $api.method($command))
    <li>
        <a href="$command">$command</a>
        #if($desc)
        <p>$desc</p>
        #end
    </li>
#end
</ul>
</div>
#end

#if($result.contexts)
<div class="block">
<h2>Sub-contexts</h2>
<ul>
#foreach($context in $result.contexts)
#set($desc = $api.method($context))
<li>
    <a href="$context">$context</a>
    #if($desc)
    <p>$desc</p>
    #end
</li>
#end
</ul>
</div>
#end

#if ($result.index != "null")

#if ($result.index.links)
<div class="block">
<h2>Index</h2>
<ul>
#foreach($link in $result.index.links)
<li><a href="$link.href" rel="$!link.rel" title="$!link.title">$link.text</a></li>
#end
</ul>
</div>
#else
<h2>Index</h2>
<pre>$result.index</pre>
#end
#end

</html>
